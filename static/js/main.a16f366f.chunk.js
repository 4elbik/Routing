(this.webpackJsonprouting=this.webpackJsonprouting||[]).push([[0],{139:function(e,t,n){e.exports=n(223)},164:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var r,a,c,o=n(0),i=n.n(o),s=n(19),u=n.n(s),l=n(15),p=n(28),m=n(118),d=n(9),f=n(224),b=n(30),h=n.n(b),E=n(56),g=n(85),v=n.n(g),O=n(227),j=n(119),w=function(e){var t=Object(j.a)({},e.response.data.errors);return Object.keys(t).forEach((function(e){t[e]=t[e].toString()})),t},y=function(e){return Object.keys(e.response.data.errors).map((function(t){return"".concat(t,": ").concat(e.response.data.errors[t][0])}))},R=Object(O.a)("USER_LOGIN_REQUEST"),x=Object(O.a)("USER_LOGIN_SUCCESS"),S=Object(O.a)("USER_LOGIN_FAILURE"),k=Object(O.a)("USER_LOGOUT"),_=Object(O.a)("USER_REGISTER_REQUEST"),N=Object(O.a)("USER_REGISTER_SUCCESS"),U=Object(O.a)("USER_REGISTER_FAILURE"),L=Object(f.a)((r={},Object(d.a)(r,R,(function(){return"requested"})),Object(d.a)(r,x,(function(){return"finished"})),Object(d.a)(r,S,(function(){return"failed"})),r),"none"),F=Object(f.a)((a={},Object(d.a)(a,_,(function(){return"requested"})),Object(d.a)(a,N,(function(){return"finished"})),Object(d.a)(a,U,(function(){return"failed"})),a),"none"),I=Object(f.a)((c={},Object(d.a)(c,x,(function(e,t){return t.payload.user})),Object(d.a)(c,S,(function(e,t){return{errors:t.payload.errors}})),Object(d.a)(c,k,(function(){return{}})),c),{}),T=Object(p.c)({userLoginFething:L,userRegisterFething:F,user:I}),C=(n(164),n(16)),D=n(34),q=n(29),G=n(17),A=n(44),B=n(45),P=n(48),V=n(47),X=n(91);function z(){var e=Object(C.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n"]);return z=function(){return e},e}var J={logout:k},Q=function(e){Object(P.a)(n,e);var t=Object(V.a)(n);function n(){var e;Object(A.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={redirect:!1},e.setRedirect=function(){e.setState({redirect:!0})},e.renderRedirect=function(){return e.state.redirect?i.a.createElement(q.a,{to:"/login"}):null},e.logout=function(){(0,e.props.logout)()},e}return Object(B.a)(n,[{key:"componentDidMount",value:function(){this.props.user.token||this.setRedirect()}},{key:"componentDidUpdate",value:function(){this.props.user.token||this.setRedirect()}},{key:"render",value:function(){var e=this.props.user;return i.a.createElement("div",{className:"content"},i.a.createElement("h1",null,"Home page"),this.renderRedirect(),i.a.createElement(W,null,i.a.createElement("span",{className:"user-name"},e.username),i.a.createElement(X.a,{type:"link",onClick:this.logout},"Log out")),i.a.createElement("p",null,"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Sint, aliquid velit repellendus accusamus quasi consequuntur. Perspiciatis eos error natus rem laborum, reiciendis omnis, maxime sapiente ducimus tempora molestias aut officia."))}}]),n}(i.a.Component),W=G.a.div(z());Q.defaultProps={user:{}};var H=Object(l.b)((function(e){return{user:e.user}}),J)(Q),M=n(14),$=n(226),K=n(1),Y=n.n(K);n(116);function Z(){var e=Object(C.a)(["\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n\n  & .error {\n    margin-left: 20px;\n    color: tomato;\n  }\n"]);return Z=function(){return e},e}function ee(){var e=Object(C.a)(["\n  margin-bottom: 20px;\n"]);return ee=function(){return e},e}var te={signin:function(e){return function(){var t=Object(E.a)(h.a.mark((function t(n){var r,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(R()),t.prev=1,"http://conduit.productionready.io/api/users/login",t.next=5,v.a.post("http://conduit.productionready.io/api/users/login",{user:e});case 5:r=t.sent,n(x(r.data)),t.next=14;break;case 9:throw t.prev=9,t.t0=t.catch(1),a=y(t.t0),n(S({errors:a})),t.t0;case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}},ne=function(e){Object(P.a)(n,e);var t=Object(V.a)(n);function n(e){var r;return Object(A.a)(this,n),(r=t.call(this,e)).state={redirect:!1},r.onResetForm=function(){r.resetButtonRef.current.click()},r.setRedirect=function(){r.setState({redirect:!0})},r.renderRedirect=function(){return r.state.redirect?i.a.createElement(q.a,{to:"/"}):null},r.resetButtonRef=i.a.createRef(),r}return Object(B.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.user;"finished"!==e.userLoginFething||t.errors||(this.onResetForm(),this.setRedirect())}},{key:"render",value:function(){var e=this,t=this.props,n=t.user,r=t.userLoginFething,a=t.signin,c=function(e,t,n){return Y()({error:t[e]&&n[e]})};return i.a.createElement("div",{className:"content"},i.a.createElement("h1",null,"Autorization:"),i.a.createElement(M.c,{initialValues:{email:"",password:""},onSubmit:function(e){a(e)}},(function(t){var a=t.errors,o=t.touched,s=t.handleReset;return i.a.createElement(M.b,null,i.a.createElement(re,null,i.a.createElement(M.a,{as:$.a,className:c("email",a,o),type:"email",name:"email",placeholder:"Email"})),i.a.createElement(re,null,i.a.createElement(M.a,{as:$.a.Password,className:c("password",a,o),name:"password",placeholder:"Input your password"})),i.a.createElement(ae,null,i.a.createElement("div",null,i.a.createElement(X.a,{type:"primary",htmlType:"submit",disabled:"requested"===r},"Sign In"),n.errors&&i.a.createElement("span",{className:"error"},n.errors)),i.a.createElement(X.a,{type:"link"},i.a.createElement(D.b,{to:"/signup"},"Create a new user"))),i.a.createElement("button",{className:"visually-hidden","aria-label":"Clear form inputs",type:"button",ref:e.resetButtonRef,onClick:s}))})),this.renderRedirect())}}]),n}(i.a.Component),re=G.a.div(ee()),ae=G.a.div(Z());ne.defaultProps={user:{}};var ce=Object(l.b)((function(e){return{userLoginFething:e.userLoginFething,user:e.user}}),te)(ne);function oe(){var e=Object(C.a)(["\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n"]);return oe=function(){return e},e}function ie(){var e=Object(C.a)(["\n  margin-bottom: 20px;\n\n  & .error {\n    border-color: tomato;\n  }\n\n  & .error-text {\n    margin-left: 5px;\n    color: tomato;\n  }\n"]);return ie=function(){return e},e}var se={register:function(e){return function(){var t=Object(E.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(_()),t.prev=1,"http://conduit.productionready.io/api/users",t.next=5,v.a.post("http://conduit.productionready.io/api/users",{user:e});case 5:n(N()),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),n(U()),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}},ue=function(e){Object(P.a)(n,e);var t=Object(V.a)(n);function n(){var e;Object(A.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={redirect:!1},e.setRedirect=function(){e.setState({redirect:!0})},e.renderRedirect=function(){return e.state.redirect?i.a.createElement(q.a,{to:"/login"}):null},e}return Object(B.a)(n,[{key:"componentDidUpdate",value:function(){"finished"===this.props.userRegisterFething&&this.setRedirect()}},{key:"render",value:function(){var e=this.props,t=e.userRegisterFething,n=e.register,r=function(e,t,n){return Y()({error:t[e]&&n[e]})};return i.a.createElement("div",{className:"content"},i.a.createElement("h1",null,"Register a new user account:"),i.a.createElement(M.c,{initialValues:{username:"",email:"",password:""},onSubmit:function(){var e=Object(E.a)(h.a.mark((function e(t,r){var a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.setErrors,e.prev=1,e.next=4,n(t);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),c=w(e.t0),a(c);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()},(function(e){var n=e.errors,a=e.touched;return i.a.createElement(M.b,null,i.a.createElement(le,null,i.a.createElement(M.a,{as:$.a,className:r("username",n,a),name:"username",placeholder:"Username"}),n.username&&a.username&&i.a.createElement("span",{className:"error-text"},n.username)),i.a.createElement(le,null,i.a.createElement(M.a,{as:$.a,className:r("email",n,a),type:"email",name:"email",placeholder:"Email"}),n.email&&a.email&&i.a.createElement("span",{className:"error-text"},n.email)),i.a.createElement(le,null,i.a.createElement(M.a,{as:$.a.Password,className:r("password",n,a),name:"password",placeholder:"Input your password"}),n.password&&a.password&&i.a.createElement("span",{className:"error-text"},n.password)),i.a.createElement(pe,null,i.a.createElement(X.a,{type:"primary",htmlType:"submit",disabled:"requested"===t},"Sign Up"),i.a.createElement(X.a,{type:"link"},i.a.createElement(D.b,{to:"/login"},"Login"))))})),this.renderRedirect())}}]),n}(i.a.Component),le=G.a.div(ie()),pe=G.a.div(oe()),me=Object(l.b)((function(e){return{userRegisterFething:e.userRegisterFething}}),se)(ue);function de(){var e=Object(C.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 50px 0;\n  height: 100vh;\n  background: rgb(2, 0, 36);\n  background: linear-gradient(\n    25deg,\n    rgba(2, 0, 36, 1) 0%,\n    rgba(9, 9, 121, 1) 20%,\n    rgba(0, 212, 255, 1) 100%\n  );\n\n  & .content {\n    width: 40%;\n\n    padding: 20px;\n\n    background-color: #fff;\n    box-shadow: 0px 2px 15px rgba(0, 0, 0, 0.5);\n    border: 2px solid lightblue;\n    border-radius: 5px;\n\n    & h1 {\n      margin: 0;\n      margin-bottom: 20px;\n      font-size: 24px;\n      font-weight: 400;\n    }\n\n    & p {\n      margin: 0;\n    }\n  }\n"]);return de=function(){return e},e}var fe=G.a.div(de()),be=Object(l.b)(null)((function(){return i.a.createElement(fe,null,i.a.createElement(D.a,null,i.a.createElement(q.d,null,i.a.createElement(q.b,{path:"/",exact:!0,component:H}),i.a.createElement(q.b,{path:"/login",component:ce}),i.a.createElement(q.b,{path:"/signup",component:me}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=Object(p.e)(T,Object(p.d)(Object(p.a)(m.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));u.a.render(i.a.createElement(l.a,{store:he},i.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[139,1,2]]]);
//# sourceMappingURL=main.a16f366f.chunk.js.map